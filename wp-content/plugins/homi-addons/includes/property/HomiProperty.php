<?php


class HomiProperty
{

    const POST_TYPE_NAME = 'property';

    const META_FIELDS_SLUG = [
        'availability_action'  => self::POST_TYPE_NAME . '_availability_action',
    ];

    /**
     * @param $meta_boxes
     *
     * @return array
     */
    public function add_meta_boxes( $meta_boxes ) {

        $meta_boxes[] = array(
            'id'         => 'property_homi_availability',
            'title'      => esc_html__( 'Property/Seller Availability', Homi_Addons::PLUGIN_NAME ),
            'post_types' => array( self::POST_TYPE_NAME ),
            'context'    => 'side',
            'priority'   => 'default',
            'autosave'   => 'false',
            'fields'     => array(
                array(
                    'type'             => 'custom_html',
                    'callback' => array( $this, 'property_availability' ),
                ),
                array(
                    'id'   => self::META_FIELDS_SLUG['availability_action'],
                    'name' => esc_html__( 'Availability Action', Homi_Addons::PLUGIN_NAME ),
                    'type'            => 'select',
                    'options'         => array(
                        'none'                  => 'None',
                        'generate_default'      => 'Generate default calendar',
                    ),
                ),
                array(
                    'type'             => 'custom_html',
                    'callback' => array( $this, 'view_availability' ),
                ),
            ),
        );

        return $meta_boxes;

    }


    public function property_availability(){

        echo 'You can select the option "Generate default calendar" from the dropdown below and then 
        click update to make all the days and times available for the next 14 days. 
        This will delete everything set by the landlord so far but it does not affect any viewings requests.';

    }


    public function view_availability(){

        if( isset( $_GET['post'] ) ):
        ?>

        <a id="viewPropertyAvailability" href="https://homi.com.gr/property-availability/calendar/<?php echo $_GET['post']; ?>" target="_blank" class="page-title-action">
            View Availability
        </a>

        <?php
        endif;


    }


    /**
     * Callback function after custom post is created
     *
     * Reference: https://codex.wordpress.org/Plugin_API/Action_Reference/wp_insert_post
     *
     * @param $property_id int
     * @param $post WP_Post
     * @param $update bool
     */
    public function after_creation_handle( $property_id, $post, $update ){

        if( $post->post_type === self::POST_TYPE_NAME ){

            if( $update ){

                switch( get_post_meta( $property_id, self::META_FIELDS_SLUG['availability_action'], true ) ){

                    case 'generate_default':

                       $availabilityController = new SellerAvailabilityController();

                        $updated = $availabilityController->save_new_property_default_calendar( $property_id );

                        update_post_meta( $property_id, self::META_FIELDS_SLUG['availability_action'], 'none' );

                        break;


                }

            }

        }

    }


    public function display_custom_fields( $post_id ){

        $key_details = array(
            array(
                'type'      => 'taxonomy',
                'key'       => 'property_type',
                'name'      => 'Type',
                'icon'      => '<svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512.002 512.002" style="enable-background:new 0 0 512.002 512.002;" xml:space="preserve"><g><g><path d="M502.001,492.002h-44v-79c0-5.523-4.478-10-10-10c-5.522,0-10,4.477-10,10v79h-120v-190c0-5.523-4.478-10-10-10h-104c-5.522,0-10,4.477-10,10v190h-120V266.001h3.848c2.652,0,5.195-1.054,7.071-2.929L256.001,91.991l171.081,171.081c1.876,1.875,4.419,2.929,7.071,2.929h3.848v75c0,5.523,4.478,10,10,10c5.522,0,10-4.477,10-10v-75h44c4.045,0,7.691-2.437,9.239-6.173c1.548-3.736,0.691-8.038-2.168-10.898l-246-246c-3.906-3.905-10.236-3.905-14.143,0l-94,94c-3.905,3.905-3.905,10.237,0,14.142c3.906,3.906,10.238,3.906,14.143,0l86.929-86.929l221.857,221.858h-39.563L263.072,70.778c-3.906-3.905-10.236-3.905-14.143,0L73.706,246.001H34.143l78.929-78.928c3.905-3.905,3.905-10.237,0-14.143c-3.905-3.904-10.237-3.905-14.143,0l-96,96c-2.859,2.86-3.716,7.161-2.168,10.898c1.548,3.737,5.195,6.173,9.24,6.173h44v226h-44c-5.522,0-10,4.477-10,10s4.478,10,10,10h54h140h104h140h54c5.522,0,10-4.477,10-10S507.523,492.002,502.001,492.002z M298.001,492.002h-84v-180h84V492.002z"/></g></g><g><g><path d="M406.001,292.002h-56c-5.522,0-10,4.477-10,10v100c0,5.523,4.478,10,10,10h56c5.522,0,10-4.477,10-10v-100C416.001,296.479,411.523,292.002,406.001,292.002z M396.001,392.002h-36v-80h36V392.002z"/></g></g><g><g><path d="M162.001,292.002h-56c-5.522,0-10,4.477-10,10v100c0,5.523,4.478,10,10,10h56c5.522,0,10-4.477,10-10v-100C172.001,296.479,167.523,292.002,162.001,292.002z M152.001,392.002h-36v-80h36V392.002z"/></g></g><g><g><path d="M256.001,164.322c-25.364,0-46,20.636-46,46s20.636,46,46,46c25.364,0,46-20.636,46-46S281.365,164.322,256.001,164.322z M256.001,236.322c-14.337,0-26-11.664-26-26s11.663-26,26-26c14.337,0,26,11.664,26,26S270.338,236.322,256.001,236.322z"/></g></g><g><g><path d="M244.07,394.932c-1.859-1.86-4.44-2.93-7.069-2.93c-2.63,0-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.44-2.93,7.07s1.069,5.21,2.93,7.07c1.861,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07S245.931,396.792,244.07,394.932z"/></g></g><g><g><path d="M140.07,125.932c-1.859-1.86-4.439-2.93-7.069-2.93s-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.44-2.93,7.07s1.069,5.21,2.93,7.07c1.861,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07S141.931,127.792,140.07,125.932z"/></g></g><g><g><path d="M455.07,367.261c-1.859-1.859-4.44-2.93-7.069-2.93c-2.63,0-5.21,1.07-7.07,2.93c-1.86,1.87-2.93,4.44-2.93,7.07s1.069,5.21,2.93,7.08c1.86,1.86,4.44,2.92,7.07,2.92s5.21-1.06,7.069-2.92c1.86-1.87,2.931-4.44,2.931-7.08C458.001,371.701,456.931,369.121,455.07,367.261z"/></g></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_id',
                'name'      => 'Property ID',
                'icon'      => '<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 299 310" style="enable-background:new 0 0 299 310;" xml:space="preserve"><g><polygon style="fill:#1259AF;" points="13.6,107 13.6,266 57.3,266 57.3,129.8 144.7,68.8 239,130.6 239,266 282.7,266 282.7,107 143.9,16.1 "/><polygon style="fill:#1259AF;" points="179.6,266 179.6,148.9 109.7,148.9 109.7,266 52.6,303 123.9,303 "/><polygon style="fill:#1259AF;" points="435.7,168.8 371.5,168.8 371.5,113.7 346.8,113.7 346.8,244.5 371.5,244.5 371.5,191.6 435.7,191.6 435.7,244.5 460.2,244.5 460.2,113.7 435.7,113.7 "/><path style="fill:#1259AF;" d="M556,110.9c-45.2,0-67.2,34.6-67.2,68.9c0,34.4,21.3,67.4,67.2,67.4c45.9,0,66.7-33.8,67.1-67.6C623.4,145.5,601,110.9,556,110.9z M556,224.7c-30.8,0-42.4-23-43-44.5c-0.6-22,12.1-46.9,43-46.9c30.8,0,43.1,24.7,42.8,46.7C598.4,201.5,586.8,224.7,556,224.7z"/><polygon style="fill:#1259AF;" points="721.9,170 681,113.7 652.6,113.7 652.6,244.5 677.2,244.5 677.2,149.4 718.9,206.4 723.7,206.4 766.3,149.6 766.3,244.5 791,244.5 791,113.7 762.8,113.7 "/><rect x="825.6" y="113.5" style="fill:#1259AF;" width="24.5" height="130.7"/></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_price',
                'name'      => 'Price',
                'suffix'    => 'â‚¬',
                'icon'      => '<svg id="Layer_1_1_" enable-background="new 0 0 64 64" height="512" viewBox="0 0 64 64" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m36.286 46.3c-.188.192-.291.452-.286.72l.147 7.422c.029 1.458-.534 2.893-1.546 3.938-.951.982-2.205 1.531-3.602 1.547h-19.999c-1.768 0-3.415-.791-4.521-2.169s-1.521-3.16-1.139-4.884c.12-.535.183-1.086.187-1.64l1.468-14.204c.003-.034.005-.069.005-.103 0-4.817 2.446-9.073 6.161-11.593 3.157-.491 6.095-1.588 7.466-2.156 1.052 1.51 3.715 4.865 7.131 5.719l.484-1.94c-2.141-.535-4.011-2.428-5.165-3.855 3.201.483 6.171 2.049 8.359 4.492l1.49-1.334c-1.803-2.014-4.075-3.502-6.571-4.391 3.716-1.531 6.675-4.628 7.97-8.634l-1.902-.615c-1.33 4.115-4.709 7.105-8.798 8.014 1.537-1.894 2.375-4.236 2.375-6.707h-2c0 2.312-.9 4.486-2.535 6.122l-.859.858c-.075-.002-.149-.007-.223-.011l-1.761-1.76c-1.551-1.551-2.184-3.837-1.652-5.966l-1.939-.485c-.663 2.649.058 5.473 1.86 7.502-4.597-1.684-7.891-6.089-7.891-11.26v-1.172c0-.62.473-.864.617-.924.145-.06.651-.222 1.09.216l2.059 2.059c.589.588 1.377.909 2.236.877.833-.032 1.621-.413 2.162-1.045l3.077-3.589c.385-.45 1.132-.45 1.519 0l3.075 3.589c.542.632 1.33 1.013 2.163 1.045.853.033 1.647-.289 2.236-.877l2.059-2.059c.438-.439.945-.277 1.09-.216.144.06.617.304.617.924v1.171c0 .623-.048 1.244-.142 1.846l1.977.308c.109-.703.165-1.428.165-2.153v-1.172c0-1.236-.71-2.298-1.853-2.772-1.141-.471-2.395-.224-3.269.65l-2.058 2.059c-.199.199-.447.301-.746.292-.281-.011-.537-.135-.721-.349l-3.075-3.589c-.571-.664-1.401-1.046-2.278-1.046s-1.707.382-2.277 1.047l-3.077 3.589c-.183.214-.438.337-.72.349-.294.007-.547-.093-.746-.292l-2.059-2.059c-.874-.875-2.128-1.122-3.269-.65-1.142.473-1.852 1.535-1.852 2.771v1.171c0 5.829 3.582 10.832 8.659 12.936-1.128.401-2.198.922-3.194 1.554-3.133.424-6.195.113-7.633-2.044l-1.664 1.109c1.474 2.211 3.93 3.011 6.57 3.093-2.912 2.889-4.724 6.887-4.738 11.301l-1.469 14.203c-.003.034-.005.069-.005.103 0 .424-.047.847-.139 1.258-.515 2.321.043 4.716 1.531 6.571 1.487 1.854 3.704 2.917 6.081 2.917h20.096c1.862-.022 3.617-.788 4.942-2.155 1.38-1.424 2.148-3.381 2.109-5.369l-.125-6.403h23.979v-2h-25c-.269 0-.526.108-.714.3z"></path><path d="m21 30.927c-6.617 0-12 5.383-12 12s5.383 12 12 12 12-5.383 12-12-5.383-12-12-12zm-10 12c0-5.177 3.954-9.446 9-9.949v2c-2.244.252-4 2.139-4 4.449 0 2.481 2.019 4.5 4.5 4.5h1c1.379 0 2.5 1.122 2.5 2.5s-1.121 2.5-2.5 2.5h-1c-1.379 0-2.5-1.122-2.5-2.5v-.5h-2v.5c0 2.31 1.756 4.197 4 4.449v2c-5.046-.503-9-4.773-9-9.949zm11 9.949v-2c2.244-.252 4-2.139 4-4.449 0-2.481-2.019-4.5-4.5-4.5h-1c-1.379 0-2.5-1.122-2.5-2.5s1.121-2.5 2.5-2.5h1c1.379 0 2.5 1.122 2.5 2.5v.5h2v-.5c0-2.31-1.756-4.197-4-4.449v-2c5.046.503 9 4.773 9 9.949s-3.954 9.446-9 9.949z"></path><path d="m61.316 32.051-5.316-1.772v-1.279h1c.434 0 .817-.279.951-.691s-.013-.863-.363-1.118l-2.588-1.882v-5.309c0-.552-.447-1-1-1h-4c-.553 0-1 .448-1 1v.945l-2.412-1.754c-.35-.255-.826-.255-1.176 0l-11 8c-.351.254-.497.706-.363 1.118s.517.691.951.691h1v13c0 .552.447 1 1 1h18 6c.553 0 1-.448 1-1v-9c0-.431-.275-.812-.684-.949zm-15.316-10.815 3.412 2.481c.304.222.707.252 1.042.083.335-.171.546-.515.546-.891v-1.909h2v4.818c0 .32.153.621.412.809l.513.373h-15.85zm2 19.764h-4v-6h4zm2 0v-7c0-.552-.447-1-1-1h-6c-.553 0-1 .448-1 1v7h-4v-12h16v12zm10 0h-4v-8.612l4 1.333z"></path></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_size',
                'name'      => 'Property Size',
                'suffix'    => ' sqm',
                'icon'      => '<svg height="512" viewBox="0 0 61 62" width="512" xmlns="http://www.w3.org/2000/svg"><g id="005---Property-Price-Increase"><path id="Shape" d="m51.26 20.67c.2264632.2487032.5627869.366894.8950484.3145376.3322614-.0523563.6159423-.2682448.7549516-.5745376l8-18c.1734267-.32909855.1498414-.72726409-.0612245-1.03358723s-.5747233-.47016876-.9440084-.42532245c-.3692851.0448463-.6831553.29097146-.8147671.63890968l-7.38 16.6-8-8.88c-.1853993-.19453566-.4412937-.30626423-.71-.31-.14 0 .79 0-4 0-.5522847 0-1 .44771525-1 1 0 .5522847.4477153 1 1 1h2.4l-4.26 8.78-4.65-6.05c-.3684854-.4492686-.918946-.7097155-1.5-.7097155s-1.1315146.2604469-1.5.7097155l-8.64 11.27h-5.85c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1h4.31l-6.61 8.59c-.7427736.9054896-.9035658 2.1555089-.41413 3.2194998.4894358 1.0639908 1.5432377 1.7552969 2.71413 1.7805002 1.64 0 2.32-1.12 3-2v5.41l-7.76-2c-.45992209-.1125987-.9357705.1128032-1.14.54l-6.1 12.99v-12.53h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1s-.44771525-1-1-1h-2v-2h2c.55228475 0 1-.4477153 1-1 0-.55228475-.44771525-1-1-1h-2v-4.59l2.29 2.3c.39212217.39212216 1.02787782.39212216 1.41999999-.00000001s.39212217-1.02787782.00000001-1.41999999l-4-4c-.28609046-.28845995-.71826679-.37516186-1.09348151-.21937095-.37521471.15579091-.61888111.52310588-.61651849.92937095 0 61.51-.26 58.51.57 58.9.13409368.0649512.28100673.099117.43.1 62.25.17 58.1 0 58.39-.08.506169-.2118006.7471349-.7919039.54-1.3-.11-.26.14 0-4.21-4.33-.3921222-.3921221-1.0278778-.3921221-1.42 0-.3921221.3921222-.3921221 1.0278778 0 1.42l2.29 2.29h-4.59v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-2v-2c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v2h-11.42l7-14.83 7.42 1.83v1h-2c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1h30c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-2v-8.41l.64.83c.5445217.698834 1.3700822 1.1212571 2.2554057 1.1540468.8853234.0327898 1.7398699-.3274071 2.3345943-.9840468.9718196-1.1469447 1.0010938-2.8197543.07-4l-10.8-14 4.75-9.78zm-22.26 26.33v-8h4v8zm13 0h-7v-8c0-1.1045695-.8954305-2-2-2h-4c-1.1045695 0-2 .8954305-2 2v8h-7v-11l11-14.3 11 14.3zm5.74-8.75c-.1899882.2221664-.4676758.3500769-.76.3500769s-.5700118-.1279105-.76-.3500769l-14.43-18.81c-.1894263-.2440794-.4810387-.3868932-.79-.3868932s-.6005737.1428138-.79.3868932l-14.43 18.76c-.1899882.2221664-.4676758.3500769-.76.3500769s-.5700118-.1279105-.76-.3500769c-.3339929-.4219004-.3339929-1.0180996 0-1.44l16.74-21.68 16.72 21.73c.3398935.4172467.3481744 1.0134745.02 1.44z"></path><path id="Shape" d="m9 11h2c.5522847 0 1-.4477153 1-1 0-.55228475-.4477153-1-1-1h-2c-.55228475 0-1 .44771525-1 1 0 .5522847.44771525 1 1 1z"></path><path id="Shape" d="m15 11h2c.5522847 0 1-.4477153 1-1 0-.55228475-.4477153-1-1-1h-2c-.5522847 0-1 .44771525-1 1 0 .5522847.4477153 1 1 1z"></path><path id="Shape" d="m21 11h2c.5522847 0 1-.4477153 1-1 0-.55228475-.4477153-1-1-1h-2c-.5522847 0-1 .44771525-1 1 0 .5522847.4477153 1 1 1z"></path><path id="Shape" d="m27 11h2c.5522847 0 1-.4477153 1-1 0-.55228475-.4477153-1-1-1h-2c-.5522847 0-1 .44771525-1 1 0 .5522847.4477153 1 1 1z"></path><path id="Shape" d="m33 11h2c.5522847 0 1-.4477153 1-1 0-.55228475-.4477153-1-1-1h-2c-.5522847 0-1 .44771525-1 1 0 .5522847.4477153 1 1 1z"></path><path id="Shape" d="m9 27h2c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-2c-.55228475 0-1 .4477153-1 1s.44771525 1 1 1z"></path></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_floorf5f6afa90b7fa9',
                'name'      => 'Floor',
                'icon'      => '<svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 480 480" style="enable-background:new 0 0 480 480;" xml:space="preserve"><g><g><g><path d="M472,464h-48V200c0-4.418-3.582-8-8-8H304V8c0-4.418-3.582-8-8-8H88c-4.418,0-8,3.582-8,8v456H8c-4.418,0-8,3.582-8,8s3.582,8,8,8h464c4.418,0,8-3.582,8-8S476.418,464,472,464z M168,464h-32v-72c0-4.418,3.582-8,8-8h16c4.418,0,8,3.582,8,8V464z M200,200v264h-16v-72c0-13.255-10.745-24-24-24h-16c-13.255,0-24,10.745-24,24v72H96V16h192v176h-80C203.582,192,200,195.582,200,200z M408,464H216V208h192V464z"></path><path d="M256,112h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8v-48C264,115.582,260.418,112,256,112z M248,160h-32v-32h32V160z"></path><path d="M256,32h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8V40C264,35.582,260.418,32,256,32z M248,80h-32V48h32V80z"></path><path d="M176,112h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8v-48C184,115.582,180.418,112,176,112z M168,160h-32v-32h32V160z"></path><path d="M176,32h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8V40C184,35.582,180.418,32,176,32z M168,80h-32V48h32V80z"></path><path d="M176,192h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8v-48C184,195.582,180.418,192,176,192z M168,240h-32v-32h32V240z"></path><path d="M176,272h-48c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h48c4.418,0,8-3.582,8-8v-48C184,275.582,180.418,272,176,272z M168,320h-32v-32h32V320z"></path><path d="M328,368h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C320,364.418,323.582,368,328,368z M336,320h32v32h-32V320z"></path><path d="M328,288h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C320,284.418,323.582,288,328,288z M336,240h32v32h-32V240z"></path><path d="M328,448h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C320,444.418,323.582,448,328,448z M336,400h32v32h-32V400z"></path><path d="M248,368h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C240,364.418,243.582,368,248,368z M256,320h32v32h-32V320z"></path><path d="M248,288h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C240,284.418,243.582,288,248,288z M256,240h32v32h-32V240z"></path><path d="M248,448h48c4.418,0,8-3.582,8-8v-48c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v48C240,444.418,243.582,448,248,448z M256,400h32v32h-32V400z"></path></g></g></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_year',
                'name'      => 'Year Built',
                'icon'      => '<svg id="Layer_5" enable-background="new 0 0 64 64" height="512" viewBox="0 0 64 64" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m59.477 47 3.451-8.628-1.857-.743-3.748 9.371h-.323v-12h-2v-16h-4v-4h-2v4h-2v-6h-2v6h-2v-4h-2v4h-4v12h-4v5.129c-2.357-2.894-5.574-5.002-9.225-5.968l-.454-1.361c1.458-.403 2.656-1.434 3.255-2.8h.424c2.206 0 4-1.794 4-4v-5c1.103 0 2-.897 2-2v-2c0-1.103-.897-2-2-2h-.174c-.957-5.76-5.883-10-11.826-10s-10.869 4.24-11.826 10h-.174c-1.103 0-2 .897-2 2v2c0 1.103.897 2 2 2v5c0 2.206 1.794 4 4 4h.424c.6 1.366 1.797 2.398 3.255 2.8l-.454 1.361c-7.815 2.061-13.225 9.047-13.225 17.181v.658c0 4.264 2.444 7.961 6 9.786v5.214h30v-8h3.101c.465 2.279 2.484 4 4.899 4s4.434-1.721 4.899-4h5.019c4.015 0 7.409-2.875 8.069-6.835l.194-1.165zm-12.477 0v-10h8v10zm-8-26h14v14h-6v-4h-8zm6 12v14h-10v-14zm-12 6.676v7.324h-.323l-3.749-9.372-1.857.743 3.452 8.629h-3.703l.194 1.165c.265 1.59.976 3.001 1.986 4.125v8.71h-5v-2c1.654 0 3-1.346 3-3s-1.346-3-3-3v-20.673c3.813 1.212 7.038 3.828 9 7.349zm-11.721-10.676.617 1.852-2.896 4.345-2.897-4.345.618-1.852zm.721 10.149-1.762-2.203 1.762-2.643zm-6 0v-4.846l1.762 2.643zm0 3.201 3-3.75 3 3.75v8.826c-.314-.111-.649-.176-1-.176h-1.171c-.801 0-1.555.312-2.122.879l-1.026 1.026-.681-.152zm2 12.064 1.121-1.121c.189-.189.441-.293.708-.293h1.171c.551 0 1 .449 1 1v1h2c.551 0 1 .449 1 1s-.449 1-1 1h-6zm4 4.586v2h-6v-2zm5-35v-4c1.103 0 2 .897 2 2s-.897 2-2 2zm2-5.444c-.591-.344-1.268-.556-2-.556v-1h2zm-.204-7.556h-6.796v-7.542c3.435 1.065 6.07 3.914 6.796 7.542zm-8.796-7.95v7.95h-2v-7.95c.329-.032.662-.05 1-.05s.671.018 1 .05zm-4 .408v7.542h-6.796c.726-3.628 3.361-6.477 6.796-7.542zm-9.001 9.542h.001 24v2h-24zm4.001 4v1c-.732 0-1.409.212-2 .556v-1.556zm-2 5c0-1.103.897-2 2-2v4c-1.103 0-2-.897-2-2zm4 2v-7h12v7c0 1.654-1.346 3-3 3h-6c-1.654 0-3-1.346-3-3zm-10 24v-.658c0-6.96 4.464-12.968 11-15.029v19.997l-1.085-.241c-2.305-.513-3.915-2.52-3.915-4.882v-4.187h-2v4.187c0 3.306 2.254 6.116 5.481 6.833l3.519.782v2.198h-4c-4.962 0-9-4.038-9-9zm6 10.574c.955.271 1.959.426 3 .426h2v2h-5zm22 2.426v-7.086c1.183.68 2.55 1.068 4 1.083v6.003zm14-4c-1.654 0-3-1.346-3-3 0-.551.449-1 1-1h4c.551 0 1 .449 1 1 0 1.654-1.346 3-3 3zm9.917-4h-5.102c-.414-1.161-1.514-2-2.816-2h-4c-1.302 0-2.402.839-2.816 2h-5.102c-2.624 0-4.896-1.625-5.785-4h31.404c-.887 2.375-3.158 4-5.783 4z"></path><path d="m49 23h2v2h-2z"></path><path d="m45 23h2v2h-2z"></path><path d="m41 23h2v2h-2z"></path><path d="m49 27h2v2h-2z"></path><path d="m41 27h2v2h-2z"></path><path d="m45 27h2v2h-2z"></path><path d="m49 31h2v2h-2z"></path><path d="m37 35h2v10h-2z"></path><path d="m41 35h2v10h-2z"></path><path d="m49 39h4v2h-4z"></path><path d="m49 43h4v2h-4z"></path></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_bedrooms',
                'name'      => 'Bedrooms',
                'icon'      => '<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><path d="M496,344h-8V280a32.042,32.042,0,0,0-32-32V112a32.042,32.042,0,0,0-32-32H88a32.042,32.042,0,0,0-32,32V248a32.042,32.042,0,0,0-32,32v64H16a8,8,0,0,0-8,8v32a8,8,0,0,0,8,8h8v32a8,8,0,0,0,8,8H56a7.99,7.99,0,0,0,7.84-6.43L70.56,392H441.44l6.72,33.57A7.99,7.99,0,0,0,456,432h24a8,8,0,0,0,8-8V392h8a8,8,0,0,0,8-8V352A8,8,0,0,0,496,344ZM72,112A16.021,16.021,0,0,1,88,96H424a16.021,16.021,0,0,1,16,16V248H424V216a32.042,32.042,0,0,0-32-32H296a32.042,32.042,0,0,0-32,32v32H248V216a32.042,32.042,0,0,0-32-32H120a32.042,32.042,0,0,0-32,32v32H72ZM408,216v32H280V216a16.021,16.021,0,0,1,16-16h96A16.021,16.021,0,0,1,408,216Zm-176,0v32H104V216a16.021,16.021,0,0,1,16-16h96A16.021,16.021,0,0,1,232,216ZM40,280a16.021,16.021,0,0,1,16-16H456a16.021,16.021,0,0,1,16,16v64H40Zm9.44,136H40V392H54.24ZM472,416h-9.44l-4.8-24H472Zm16-40H24V360H488Z"></path></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_property_bathrooms',
                'name'      => 'Bathrooms',
                'icon'      => '<svg id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g id="XMLID_970_"><g id="XMLID_1079_"><path id="XMLID_1150_" d="m512 290.001c0-17.645-14.355-32-32-32h-406v-208c0-16.542 13.458-30 30-30h8c13.603 0 25.112 9.103 28.776 21.535-17.725 4.923-30.776 21.194-30.776 40.465v12c0 5.523 4.478 10 10 10h64c5.523 0 10-4.477 10-10v-12c0-20.006-14.065-36.779-32.823-40.978-4.244-23.299-24.673-41.022-49.177-41.022h-8c-27.57 0-50 22.43-50 50v208h-22c-17.645 0-32 14.355-32 32 0 14.153 9.239 26.181 22 30.391v33.609c0 35.283 14.35 67.278 37.521 90.455-2.732 2.125-5.863 3.723-9.249 4.63-8.257 2.212-15.157 7.507-19.431 14.91-4.274 7.402-5.409 16.026-3.196 24.282 3.826 14.281 16.788 23.722 30.917 23.722 2.733 0 5.512-.353 8.274-1.094 19.842-5.317 37.023-17.105 49.118-33.509 10.846 2.996 22.261 4.605 34.047 4.605h212c11.786 0 23.201-1.609 34.047-4.605 12.094 16.404 29.276 28.192 49.117 33.509 2.764.741 5.54 1.094 8.274 1.094 14.127-.001 27.091-9.442 30.917-23.721 2.213-8.256 1.078-16.88-3.196-24.283-4.273-7.403-11.174-12.698-19.431-14.91-3.386-.908-6.517-2.505-9.249-4.63 23.17-23.177 37.52-55.172 37.52-90.455v-33.609c12.761-4.21 22-16.238 22-30.391zm-338-208v2h-44v-2c0-12.131 9.869-22 22-22s22 9.869 22 22zm-112.34 409.586c-3.1.83-6.331.403-9.106-1.199-2.775-1.603-4.761-4.19-5.591-7.287-.83-3.096-.404-6.33 1.198-9.105 1.603-2.776 4.191-4.761 7.286-5.591 7.317-1.96 13.998-5.695 19.48-10.798 6.63 4.818 13.738 9.014 21.239 12.506-9.078 10.367-20.997 17.854-34.506 21.474zm402.179-17.592c1.603 2.776 2.028 6.01 1.198 9.107-.83 3.096-2.815 5.684-5.591 7.286s-6.009 2.029-9.106 1.199c-13.508-3.62-25.428-11.106-34.505-21.475 7.501-3.492 14.608-7.688 21.239-12.506 5.482 5.103 12.162 8.838 19.479 10.798 3.095.83 5.683 2.815 7.286 5.591zm16.161-171.994h-178.873c-5.523 0-10 4.477-10 10s4.477 10 10 10h168.873v32c0 59.551-48.448 108-108 108h-212c-59.552 0-108-48.449-108-108v-32h169.127c5.522 0 10-4.477 10-10s-4.478-10-10-10h-179.127c-6.617 0-12-5.383-12-12s5.383-12 12-12h448c6.617 0 12 5.383 12 12s-5.383 12-12 12z"/><path id="XMLID_1184_" d="m256 302.001c-2.63 0-5.21 1.07-7.07 2.93s-2.93 4.44-2.93 7.07 1.069 5.21 2.93 7.07c1.86 1.86 4.44 2.93 7.07 2.93s5.21-1.07 7.069-2.93c1.86-1.86 2.931-4.44 2.931-7.07s-1.07-5.21-2.931-7.07c-1.859-1.86-4.439-2.93-7.069-2.93z"/><path id="XMLID_1204_" d="m407 87.001c5.522 0 10-4.477 10-10v-13c0-5.523-4.478-10-10-10s-10 4.477-10 10v13c0 5.523 4.478 10 10 10z"/><path id="XMLID_1205_" d="m407 156.001c5.522 0 10-4.477 10-10v-12.644c0-5.523-4.478-10-10-10s-10 4.477-10 10v12.644c0 5.523 4.478 10 10 10z"/><path id="XMLID_1206_" d="m435 115.001h13c5.522 0 10-4.477 10-10s-4.478-10-10-10h-13c-5.522 0-10 4.477-10 10s4.478 10 10 10z"/><path id="XMLID_1207_" d="m366 115.001h13c5.522 0 10-4.477 10-10s-4.478-10-10-10h-13c-5.522 0-10 4.477-10 10s4.478 10 10 10z"/><path id="XMLID_1209_" d="m256.127 149.001c5.522 0 10-4.477 10-10v-13c0-5.523-4.478-10-10-10-5.523 0-10 4.477-10 10v13c0 5.523 4.478 10 10 10z"/><path id="XMLID_1210_" d="m256.127 218.001c5.522 0 10-4.477 10-10v-12.644c0-5.523-4.478-10-10-10-5.523 0-10 4.477-10 10v12.644c0 5.523 4.478 10 10 10z"/><path id="XMLID_1211_" d="m284.127 177.001h13c5.522 0 10-4.477 10-10s-4.478-10-10-10h-13c-5.523 0-10 4.477-10 10s4.477 10 10 10z"/><path id="XMLID_1257_" d="m215.127 177.001h13c5.522 0 10-4.477 10-10s-4.478-10-10-10h-13c-5.522 0-10 4.477-10 10s4.478 10 10 10z"/></g></g></svg>'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'fave_w-cf5f6b863cb2883',
                'name'      => 'W/C',
                'default'   => 0,
                'icon'      => '<svg id="Capa_1" enable-background="new 0 0 513 513" height="512" viewBox="0 0 513 513" width="512" xmlns="http://www.w3.org/2000/svg"><g id="XMLID_2187_"><g id="XMLID_626_"><path id="XMLID_644_" d="m414.414 201h-203v-140.05c5.053-.502 9-4.765 9-9.95v-40c0-5.523-4.478-10-10-10h-132c-5.522 0-10 4.477-10 10v40c0 5.185 3.947 9.447 9 9.95v216.876c0 25.224 6.543 50.172 18.922 72.149 11.446 20.32 27.648 37.689 47.078 50.527v102.498c0 5.522 4.478 10 10 10h147c5.522 0 10-4.478 10-10v-82c0-8.822 7.178-16 16-16 80.505 0 146-65.495 146-146 0-31.981-26.018-58-58-58zm-317-140h94v188h-94zm-9-40h112v20h-112zm238 364c-19.851 0-36 16.149-36 36v72h-127v-98c0-3.497-1.826-6.739-4.817-8.552-37.738-22.873-61.183-64.495-61.183-108.623v-8.825h189.5c5.522 0 10-4.478 10-10 0-5.523-4.478-10-10-10h-75.5v-28h203c17.492 0 32.253 11.884 36.655 28h-74.155c-5.522 0-10 4.477-10 10 0 5.522 4.478 10 10 10h75.104c-5.114 64.819-59.493 116-125.604 116z"></path><path id="XMLID_675_" d="m331.91 249c-2.63 0-5.2 1.069-7.07 2.93-1.86 1.86-2.93 4.44-2.93 7.07s1.069 5.21 2.93 7.069c1.87 1.86 4.44 2.931 7.07 2.931s5.21-1.07 7.069-2.931c1.87-1.859 2.94-4.439 2.94-7.069s-1.07-5.21-2.94-7.07c-1.859-1.861-4.439-2.93-7.069-2.93z"></path><path id="XMLID_677_" d="m461.5 387.678c-5.522 0-10 4.478-10 10v13c0 5.522 4.478 10 10 10s10-4.478 10-10v-13c0-5.523-4.478-10-10-10z"></path><path id="XMLID_678_" d="m461.5 457.034c-5.522 0-10 4.477-10 10v12.643c0 5.522 4.478 10 10 10s10-4.478 10-10v-12.643c0-5.522-4.478-10-10-10z"></path><path id="XMLID_725_" d="m502.5 428.678h-13c-5.522 0-10 4.478-10 10s4.478 10 10 10h13c5.522 0 10-4.478 10-10 0-5.523-4.478-10-10-10z"></path><path id="XMLID_726_" d="m433.5 428.678h-13c-5.522 0-10 4.478-10 10s4.478 10 10 10h13c5.522 0 10-4.478 10-10 0-5.523-4.478-10-10-10z"></path><path id="XMLID_727_" d="m51.5 387.678c-5.522 0-10 4.478-10 10v13c0 5.522 4.478 10 10 10s10-4.478 10-10v-13c0-5.523-4.478-10-10-10z"></path><path id="XMLID_728_" d="m51.5 457.034c-5.522 0-10 4.477-10 10v12.643c0 5.522 4.478 10 10 10s10-4.478 10-10v-12.643c0-5.522-4.478-10-10-10z"></path><path id="XMLID_729_" d="m92.5 428.678h-13c-5.522 0-10 4.478-10 10s4.478 10 10 10h13c5.522 0 10-4.478 10-10 0-5.523-4.478-10-10-10z"></path><path id="XMLID_730_" d="m23.5 428.678h-13c-5.523 0-10 4.478-10 10s4.477 10 10 10h13c5.522 0 10-4.478 10-10 0-5.523-4.478-10-10-10z"></path><path id="XMLID_731_" d="m384.5 33c5.522 0 10-4.478 10-10v-13c0-5.523-4.478-10-10-10s-10 4.477-10 10v13c0 5.522 4.478 10 10 10z"></path><path id="XMLID_732_" d="m384.5 102c5.522 0 10-4.478 10-10v-12.645c0-5.522-4.478-10-10-10s-10 4.478-10 10v12.645c0 5.522 4.478 10 10 10z"></path><path id="XMLID_733_" d="m412.5 61h13c5.522 0 10-4.478 10-10s-4.478-10-10-10h-13c-5.522 0-10 4.478-10 10s4.478 10 10 10z"></path><path id="XMLID_734_" d="m343.5 61h13c5.522 0 10-4.478 10-10s-4.478-10-10-10h-13c-5.522 0-10 4.478-10 10s4.478 10 10 10z"></path></g></g></svg>'
            ),

        );

        $energy_fields = array(
            array(
                'type'      => 'meta',
                'key'       => 'heating-typef5f6afd535a105',
                'name'      => 'Heating Type'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'heating-sourcef5f6afd66d0f75',
                'name'      => 'Heating Source'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'solar-water-heaterf5f6b196e9fdc4',
                'name'      => 'Solar Water Heater'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'air-conditioningf5f6b26eaaa48c',
                'name'      => 'Air Conditioning'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'no-airconsf5f6b0b8fb2fcf',
                'name'      => 'Aircon units'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'energy-classf5f6b75208719b',
                'name'      => 'Energy Class'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'awningsf5f6b82eae5347',
                'name'      => 'Awnings'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'window-screensf5f6b830a90799',
                'name'      => 'Window Screens'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'double-glazed-windowsf5f6b832b6243e',
                'name'      => 'Double Glazed Windows'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'framesf5f6afda07004c',
                'name'      => 'Frames'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'floor-typef5f6afde4377bc',
                'name'      => 'Floor Type'
            ),
        );

        $additional_details = array(
            array(
                'type'      => 'meta',
                'key'       => 'price-sqmf5f6db65d370bf',
                'name'      => 'Price/sqm'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'furnishedf5f6b1a239fc12',
                'name'      => 'Furnished'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'elevatorf5f6b17a7ed3a0',
                'name'      => 'Elevator'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'pet-friendlyf5f6b849c645c5',
                'name'      => 'Pet Friendly'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'secured-doorf5f6b19aba577d',
                'name'      => 'Secured Door'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'storagef5f6b1a0340fcf',
                'name'      => 'Storage'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'renovatedf5f6b84ed0abeb',
                'name'      => 'Renovated'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'renovation-yearf5f6afedd47d75',
                'name'      => 'Renovation Year'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'balconyf5f6b00a89100e',
                'name'      => 'Balcony'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'balcony-sizef5f6b007f3ab30',
                'name'      => 'Balcony Size'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'viewf5f6b00ba46eca',
                'name'      => 'View'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'parkingf5f6b0af5c1ab6',
                'name'      => 'Parking'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'parking-typef5f6b0b285ebc4',
                'name'      => 'Parking Type'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'distance-from-seaf5f6b159430116',
                'name'      => 'Distance from Sea'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'distance-from-metrof5f6b159aebe23',
                'name'      => 'Distance from Metro'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'distance-from-bus-stationf5f6b15af8299c',
                'name'      => 'Distance from Bus'
            ),
        );

        $contract_details = array(
            array(
                'type'      => 'meta',
                'key'       => 'available-fromf5f6afeb65e2a6',
                'name'      => 'Available from'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'depositf5f6afe805ce7a',
                'name'      => 'Deposit'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'lease-durationf5f6afe987c2a8',
                'name'      => 'Lease Duration'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'estimated-billsf5f6afe537ee82',
                'name'      => 'Estimated Bills'
            ),
            array(
                'type'      => 'meta',
                'key'       => 'common-chargesf5f6afe4630b6e',
                'name'      => 'Common Charges'
            ),
        );

        $custom_fields_sections = array(
//            array(
//                'title'     => 'Key details',
//                'fields'    => $key_details
//            ),
            array(
                'title'     => 'Energy Information',
                'fields'    => $energy_fields
            ),
            array(
                'title'     => 'Additional Details',
                'fields'    => $additional_details
            ),
            array(
                'title'     => 'Contract Information',
                'fields'    => $contract_details
            ),
        );

        ?>

        <div class="homi-detail-section">

        <h2>Key Details</h2>

        <div class="homi-key-detail flex flex-center">

            <?php foreach( $key_details as $field ):


                switch( $field['type'] ){

                    case 'taxonomy':

                        $value = houzez_taxonomy_simple($field['key'] );

                        break;

                    case 'meta':

                        $key = $field['key'];
                        if (strpos( $field['key'], 'fave_') === false) {
                            $key = 'fave_'. $field['key'];
                        }

                        $value = get_post_meta( $post_id, $key, true );

                        if( $key === 'fave_property_id' ){
                            $value =  $post_id;
                        }

                        break;

                }

                if( empty( $value ) ){

                    $value = ( isset( $field['default'] ) ? $field['default'] : 'No' );

                }

                $suffix = ( isset( $field['suffix'] ) ? $field['suffix'] : '' );
        ?>


            <div class="stats-block center">

                <div class="icon">
                    <?php echo $field['icon']; ?>
                </div>

                <div class="value">
                    <?php echo $value.$suffix; ?>
                </div>

                <div class="label">
                    <?php echo $field['name']; ?>
                </div>

            </div>

        <?php endforeach; ?>

        </div>

        </div>

        <?php foreach( $custom_fields_sections as $section ): ?>

        <div id="detail" class="detail-list detail-block target-block">
            <div class="detail-title">
                <h2 class="title-left"><?php echo $section['title'] ?></h2>
            </div>
            <div class="alert alert-info">
                <ul class="homi-details-list">
                    <?php

                        foreach( $section['fields'] as $field ){

                            switch( $field['type'] ){

                                case 'taxonomy':

                                    $value = houzez_taxonomy_simple($field['key'] );

                                    break;

                                case 'meta':

                                    $key = $field['key'];
                                    if (strpos( $field['key'], 'fave_') === false) {
                                        $key = 'fave_'. $field['key'];
                                    }

                                    $value = get_post_meta( $post_id, $key, true );

                                    break;

                            }

                            $prefix = '';
                            $extra_class = '';
                            if( empty( $value ) ){

                                $value = ( isset( $field['default'] ) ? $field['default'] : '-' );
                                $extra_class = 'empty-field';
                            }

                            if( $value === 'No'){
                                $prefix = '<i class="fa fa-times"></i>';
                                $extra_class = 'no-value-field';
                            }
                            else if( $value === 'Yes' ){
                                $extra_class = 'yes-value-field';
                                $prefix = '<i class="fa fa-check"></i>';
                            }


                            $suffix = ( isset( $field['suffix'] ) ? $field['suffix'] : '' );

                            echo '<li class="'.$extra_class.'">'.$field['name'].': <strong>'.$prefix.$value.$suffix.'</strong></li>';

                        }

                    ?>
                </ul>

            </div>

            </div>

        <?php
        endforeach;
    }

}
